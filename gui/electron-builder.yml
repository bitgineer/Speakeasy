appId: com.speakeasy.app
productName: SpeakEasy
directories:
  buildResources: resources
  output: dist

files:
  - "!**/.vscode/*"
  - "!src/*"
  - "!electron.vite.config.*"
  - "!{.eslintignore,.eslintrc.cjs,.prettierignore,.prettierrc.yaml,dev-app-update.yml,CHANGELOG.md,README.md}"
  - "!{tsconfig.json,tsconfig.node.json,tsconfig.web.json}"
  - "!{.env,.env.*,.npmrc,pnpm-lock.yaml}"
  - "!{tailwind.config.js,postcss.config.js}"

# Include Python backend as extra resource
extraResources:
  - from: "../backend"
    to: "backend"
    filter:
      - "**/*"
      - "!**/__pycache__/**"
      - "!**/*.pyc"
      - "!**/.*"

asarUnpack:
  - resources/**

# Windows configuration
win:
  executableName: SpeakEasy
  icon: resources/icon.ico
  target:
    - target: nsis
      arch:
        - x64

nsis:
  oneClick: false
  perMachine: false
  allowToChangeInstallationDirectory: true
  deleteAppDataOnUninstall: false
  artifactName: ${name}-${version}-win-setup.${ext}
  shortcutName: SpeakEasy
  uninstallDisplayName: SpeakEasy
  createDesktopShortcut: true
  createStartMenuShortcut: true

# Linux configuration
linux:
  executableName: speakeasy
  icon: resources/icon.png
  category: Utility
  target:
    - target: AppImage
      arch:
        - x64
    - target: deb
      arch:
        - x64

appImage:
  artifactName: ${name}-${version}-linux.${ext}

deb:
  artifactName: ${name}-${version}-linux.${ext}
  depends:
    - libgtk-3-0
    - libnotify4
    - libnss3
    - libxss1
    - libxtst6
    - xdg-utils
    - libatspi2.0-0
    - libuuid1

# macOS configuration (for future)
mac:
  executableName: SpeakEasy
  icon: resources/icon.icns
  category: public.app-category.utilities
  target:
    - target: dmg
      arch:
        - x64
        - arm64

dmg:
  artifactName: ${name}-${version}-mac.${ext}

# Publishing configuration
publish:
  provider: github
  releaseType: release
