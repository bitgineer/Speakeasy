#!/usr/bin/env bash
# Pre-commit hook to update the dependency diagram

# Check if any Python files in src/faster_whisper_hotkey have changed
CHANGED_FILES=$(git diff --cached --name-only | grep -E '^src/faster_whisper_hotkey/.*\.py$')

if [ -n "$CHANGED_FILES" ]; then
    echo "Python files changed. Updating dependency diagram..."
    python3 scripts/generate_dependency_diagram.py -o docs/dependencies.dot

    # Add the updated diagram to the commit
    git add docs/dependencies.dot
    echo "Dependency diagram updated and added to commit."
fi
